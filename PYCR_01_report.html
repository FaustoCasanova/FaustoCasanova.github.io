<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

	
  <title>Fausto Casanova</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: iPortfolio
  * Updated: Jul 27 2023 with Bootstrap v5.3.1
  * Template URL: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Mobile nav toggle button ======= -->
  <i class="bi bi-list mobile-nav-toggle d-xl-none"></i>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="d-flex flex-column">

      <div class="profile">
        <img src="assets/img/profile-img.png" alt="" class="img-fluid rounded-circle">
        <h1 class="text-light"><a href="index.html">Fausto Casanova</a></h1>
        <div class="social-links mt-3 text-center">
          <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
          <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
          <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
          <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
          <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>
      </div>

      <nav id="navbar" class="nav-menu navbar">
        <ul>
          <li><a href="index.html#hero" class="nav-link scrollto active"><i class="bx bx-home"></i> <span>Home</span></a></li>
          <li><a href="index.html#about" class="nav-link scrollto"><i class="bx bx-user"></i> <span>Perfil</span></a></li>
          <li><a href="index.html#resume" class="nav-link scrollto"><i class="bx bx-file-blank"></i> <span>CV</span></a></li>
          <li><a href="index.html#portfolio" class="nav-link scrollto"><i class="bx bx-book-content"></i> <span>Portafolio</span></a></li>
          <!-- ======= Elimine 2 <li> aqui ======= -->

        </ul>
      </nav><!-- .nav-menu -->
    </div>
  </header><!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
          <h2>Proyecto de Gestion de Cartera</h2>
          <ol>
            <li><a href="index.html">Home</a></li>
            <li>Portafolio</li>
          </ol>
        </div>

      </div>
    </section><!-- End Breadcrumbs -->




    <!-- ======= Detalles contenido Inicio  ======= -->	
    <section class="inner-page" style="text-align: justify;font-size: 16px;font-family: 'Times New Roman'">
	
	  <!-- Subencabezado Inicio --> 
	  
	  <h5 style="color: black; text-align: center;font-size: 20px;font-family: 'Times New Roman'">
		Resultados del Proyecto de Gestion de Cartera
	  </h5>
	  
	  
	  <!-- Resumen Inicio--> 
	  <div class="container">
		<h6 style="color: black;font-size: 17px;font-family: 'Times New Roman'">
			Resumen:
		</h6>
		<p>
		El presente reporte tiene como finalidad presentar los resultados de los analisis exploratorios realizados en SQL y Power BI en base 
		a las preguntas propuestas previamente. 
		El analisis busca obtener informacion relevante de la cartera de creditos de la empresa "x" durante el periodo del primer semestre del año 2021
		enfocandose en 3 puntos importantes: <br>
		<ol> <!-- Inicia una lista ordenada -->
			<li>Analisis General de la cartera de creditos</li>
			<li>Analisis de la Cobranza de la cartera de creditos</li>
			<li>Analisis de la Cartera pendiente de cobro</li>
		</ol> <!-- Cierra la lista ordenada --> 			
		
		<br>
		Para mas Informacion sobre el proyecto ir al Repositorio GitHub
		</p>
		
		
		<figure>
		  <img src="assets/img/github_logo.png" alt="Repositorio GitHub" style="width: 100px; height: 100px;">
		  <a href="https://github.com/FaustoCasanova" target="_blank">
			<figcaption>Repositorio GitHub</figcaption>
		  </a>	
		</figure>
		  
	
			  
	  <br>
	  <hr style="border: 2px solid black;">
	
	  </div>
	  <!-- Resumen Final-->
	  
	  <br>
	  
	
	  <!-- REPORTE POWER BI INICIO--> 
	  <h5 style="color: black; text-align: center;font-size: 20px;font-family: 'Times New Roman'">
		Reporte del Analisis Exploratorio en Power BI
	  </h5>
	  
	  <br>
	  
	  <div class="container">	
	  
		<div class="box">
			
			<iframe title="Report Section" width="1024" height="612" src="https://app.powerbi.com/view?r=eyJrIjoiOWE0MjA2NjUtZWVlZC00ODU5LWE4YmItOWU2MjQzMzFkMDY3IiwidCI6IjhjYTUyZTJiLTFkMjAtNDI3NC05YTEzLWJkNzZlY2NiODFkMSIsImMiOjR9" frameborder="0" allowFullScreen="true" style="display: block; margin: 0 auto;"></iframe>
	
		</div>
	  <br>
	  <hr style="border: 2px solid black;">
	  </div>
	  <!-- REPORTE POWER BI FINAL--> 
	  
	  
	  
	  
	  <br>
	 
	  
	  <!-- REPORTE SQL INICIO--> 
	  <h5 style="color: black; text-align: center;font-size: 20px;font-family: 'Times New Roman'">
		Reporte del Analisis Exploratorio en MYSQL
	  </h5>
	
	  <br> 
	
	  
      <div class="container">
	  
        <h6 style="color: black;font-size: 17px;font-family: 'Times New Roman'">
        Resumen:
        </h6>
			<p>
			El reporte busca mostrar y resumir brevemente los resultados de las consultas realizadas en MYSQL respondiendo a las preguntas propuestas 
			desde el inicio. No se busca profundizar mucho sobre las informacion e indicadores extraidos, mas bien se enfoca en mostrar el resultado
			de las consultas SQL y mostrar la "materia prima" que se utilizó como referencia en la creacion del Dashboard en Power BI.
			</p>
			<br>
			
	
      </div>
	  <!-- Subencabezado Fin --> 
	  
	  
	  <br> 
	  
	  <!-- SECCION GRAFICOS PLOTLY INICIA -->
	  
	  <!-- Analisis General Inicio -->
	  <div class="container">
	    <hr style="border: 2px dashed #333;">
		<br>
		
		<h6 style="color: black; text-align: center;margin-bottom: 15px;font-size: 18px; font-family: 'Times New Roman'">
		Analisis General de la cartera de creditos
		</h6>


		<!-- //////////////////// -->	
		<!-- //////////////////// -->
		<!-- //////////////////// -->
		
		
		
		<!-- CONSULTA SQL 1 Inicio-->
		
		<div class="box">
			
			<p style="text-align: justify;font-size: 16px; font-family: 'Times New Roman'">
			Consulta SQL 1  <br>
			La consulta sql nos devuelve la informacion sobre la cantidad de creditos que se otorgaron en cada mes junto su monto respectivo en USD , de igual
			manera se detallan los creditos que se lograron cobrar durante cada mes respectivo y su valor en USD.<br>
            Ademas se aplica una funcion acumulativa que devuelve el monto acumulado tanto de los creditos como de los cobros en cada mes para conocer el saldo pendiente 
            de cobro al final de cada mes.			
			</p>
			<pre style="height: 350px ; background-color: #f5f5f5; color: #333; padding: 10px; font-family: 'Courier New', monospace; border: 1px solid #ccc; line-height: 1.4; white-space: pre-wrap;">

DROP VIEW IF EXISTS cartera.Explorar_1 ;
CREATE VIEW cartera.Explorar_1 AS
	
SELECT 
	-- > Columnas
	C1.mes_id , C1.mes , 
	C1.Creditos_dados , C2.Creditos_cobrados ,
	C1.Monto_credito  , C2.Monto_cobrado     ,
	-- > Medidas	
	SUM(C1.Monto_credito) OVER (ORDER BY C1.mes_id) AS Cartera_Acumulada ,
	SUM(C2.Monto_cobrado) OVER (ORDER BY C1.mes_id) AS Cobros_Acumulados ,
	SUM(C1.Monto_credito) OVER (ORDER BY C1.mes_id) - SUM(C2.Monto_cobrado) OVER (ORDER BY C1.mes_id) AS Saldo_por_cobrar
FROM
	-- > Subquery 1
	(SELECT
		MONTH(Fecha_Factura) AS mes_id			,
		MONTHNAME(Fecha_Factura) AS mes 		,
		COUNT(Credit_id) AS Creditos_dados  	,
		SUM(Monto_credito) AS Monto_credito
	FROM cartera.creditos
	GROUP BY MONTH(Fecha_Factura) , MONTHNAME(Fecha_Factura) 
	ORDER BY mes_id 
	) AS C1
	
LEFT JOIN 
	-- > Subquery 2
	(SELECT
		MONTH(Fecha_cobro) AS mes_id 			,
		MONTHNAME(Fecha_cobro) AS mes 			,
		COUNT(Credit_id) AS Creditos_cobrados 	,
		SUM(Monto_cobrado) AS Monto_cobrado
	FROM cartera.cobros
	GROUP BY MONTH(Fecha_cobro) , MONTHNAME(Fecha_cobro) 
	HAVING mes_id IN (1,2,3,4,5,6)
	ORDER BY mes_id 
	) AS C2
-- > Unir Subqueries
ON C1.mes_id = C2.mes_id
ORDER BY C1.mes_id 

SELECT * 
FROM cartera.Explorar_1 ;
            </pre>

			<iframe src="proyects/PYCR_01/Figures/Consulta_1_SQL.html" scrolling="no" width= "930" height= "380" style="float: center;position: relative; left: 110px;top: -25px"></iframe>
		</div>
		<!-- CONSULTA SQL 1 Fin-->


		<!-- //////////////////// -->
		<!-- //////////////////// -->
		<!-- //////////////////// -->


		
		<!-- CONSULTA SQL 2 Inicio-->
		
		<div class="box">
			
			<p style="text-align: justify;font-size: 16px; font-family: 'Times New Roman'">
			Consulta SQL 2 <br>
			Apartir de la consulta SQL 1 se calculan ciertas medidas que devuelve informacion sobre la Cartera Bruta de cada mes y ademas sobre que porcentage de 
			esta cartera fue cobrada y que porcentage se mantiene como pendiente de cobro
			</p>
			
			<pre style="height: 350px ; background-color: #f5f5f5; color: #333; padding: 10px; font-family: 'Courier New', monospace; border: 1px solid #ccc; line-height: 1.4; white-space: pre-wrap;">
SELECT 
    -- > Columnas
    mes_id , mes , 
    Cartera_Acumulada , Cobros_Acumulados , Saldo_por_cobrar , Monto_credito ,
    -- > Medida | Cartera Bruta
    Monto_credito + LAG(Saldo_por_cobrar,1,0) OVER(ORDER BY mes_id) AS Cartera_Bruta ,
    Monto_cobrado ,
    
    -- > Medida | Porcentage de Cartera Cobrada
    ROUND(
		Monto_cobrado / (Monto_credito + LAG(Saldo_por_cobrar,1,0) OVER(ORDER BY mes_id)) , 
        3 
	) AS Porcentage_Cartera_Cobrada ,
    
    -- > Medida | Porcentage de Cartera Pendiente
	ROUND(
		1 - ( Monto_cobrado / (Monto_credito + LAG(Saldo_por_cobrar,1,0) OVER(ORDER BY mes_id)) ) ,
        3
	) AS Porcentage_Cartera_Pendiente 
    
FROM cartera.Explorar_1 ;

			</pre>
			<iframe src="proyects/PYCR_01/Figures/Consulta_2_SQL.html" scrolling="no" width= "930" height= "380" style="float: center;position: relative; left: 110px;top: -25px"></iframe>
		</div>
		<!-- CONSULTA SQL 2 Fin-->
			
	  </div>
	  <!-- Analisis General Fin -->
		
		
		
		
	  <!-- Analisis Cobros Inicio -->
	  <div class="container">
	  
	    <hr style="border: 2px dashed #333;">
		<br>
		
	    <h6 style="color: black; text-align: center;margin-bottom: 15px;font-size: 18px; font-family: 'Times New Roman'">
		Analisis de la Cobranza de la cartera de creditos
		</h6>
	  
		<!-- //////////////////// -->
		<!-- //////////////////// -->
		<!-- //////////////////// -->		


		
		<!-- CONSULTA SQL 3 Inicio-->
		
		<div class="box">
			
			<p style="text-align: justify;font-size: 16px; font-family: 'Times New Roman'">
			Consulta SQL 3 <br>
			Esta consulta nos devuleve la situacion de la cartera con respecto a la cobranza, nos indica en especifico que cantidad de creditos fueron cobrados
			cada mes y su monto respectivo en USD clasificados segun su status Vigente si fueron cobrados dentro del plazo de la fecha de vencimiento o Vencido 
			si el cobro se realizo fuera de este plazo.<br>
			
			</p>
			<iframe src="proyects/PYCR_01/Figures/Consulta_3_SQL.html" scrolling="yes" width= "930" height= "380" style="float: center;position: relative; left: 110px;top: 10px"></iframe>
		</div>
		<!-- CONSULTA SQL 3 Fin-->
		
	
      </div>
	  <!-- Analisis Cobros Fin -->	
	  
	  
	  <!-- Analisis Cartera Pendiente Inicio -->
	  <div class="container">
	  
	  <br>
	  <hr style="border: 2px dashed #333;">
		<br>
		
	    <h6 style="color: black; text-align: center;margin-bottom: 15px;font-size: 18px; font-family: 'Times New Roman'">
		Analisis de la Cartera pendiente de cobro
		</h6>
		
	  <!-- CONSULTA SQL 4 Inicio-->
		
		<div class="box">
			
			<p style="text-align: justify;font-size: 16px; font-family: 'Times New Roman'">
			Consulta SQL 4 <br>
			Esta consulta nos devuleve la situacion de la cartera pendiente de cobro al final de cada mes, nos indica en especifico que cantidad de creditos que aun no 
			fueron cobrados
			y su monto respectivo en USD clasificados segun su status Vigente o Vencido , ademas de detallar el periodo de tiempo que se mantien vencidos.
            			
			
			</p>
			<pre style="height: 350px ; background-color: #f5f5f5; color: #333; padding: 10px; font-family: 'Courier New', monospace; border: 1px solid #ccc; line-height: 1.4; white-space: pre-wrap;">
-- > Procedure para simular Reporte dado una fecha de Corte
DROP PROCEDURE IF EXISTS cartera.Reportes_Corte ;

DELIMITER //
CREATE PROCEDURE cartera.Reportes_Corte()
BEGIN
	-- > Variables Iniciales
    DECLARE contador INT					;
    SET contador = 1						;
	SET @Fecha_corte = DATE("2021-01-31") 	;
    
	-- > * Inicio del Bucle *
    WHILE contador <= 6 DO
        -- > | Inicio de Consulta Principal |
		WITH Explorar_3 AS (
		SELECT 
		-- > Columnas
		    MONTH(C1.Fecha_Factura) AS mes_id  , 
		    MONTHNAME(C1.Fecha_Factura) AS mes ,
		    C1.Credit_id , C1.Cliente_id , C1.Total_Factura , C1.Fecha_Factura , C1.Monto_credito , C1.Fecha_vencimiento ,
		    C2.Monto_cobrado ,
		-- > Medidas
		    COUNT(C1.Fecha_Factura) OVER (PARTITION BY MONTH(C1.Fecha_Factura)) AS conteo ,
		    SUM(C1.Monto_credito) OVER(PARTITION BY MONTH(C1.Fecha_Factura)) AS Cartera_del_Mes ,
		    SUM(C1.Monto_credito) OVER() AS Cartera_Total ,
		-- > Categorizacion en base al periodo de vencimiento
		    CASE 
			    WHEN C1.Fecha_vencimiento >= @Fecha_corte THEN "VIGENTE"
			    WHEN DATEDIFF(@Fecha_corte , C1.Fecha_vencimiento) BETWEEN 1  AND 15 THEN "VENCIDO 01-15"
			    WHEN DATEDIFF(@Fecha_corte , C1.Fecha_vencimiento) BETWEEN 16 AND 30 THEN "VENCIDO 16-30"
			    WHEN DATEDIFF(@Fecha_corte , C1.Fecha_vencimiento) BETWEEN 31 AND 45 THEN "VENCIDO 31-45"
			    WHEN DATEDIFF(@Fecha_corte , C1.Fecha_vencimiento) BETWEEN 46 AND 60 THEN "VENCIDO 46-60"
			    ELSE "VENCIDO +60"
		    END AS Vencimiento

		FROM 
			-- > Subquery 1
			(SELECT * 
		     FROM cartera.creditos
		     WHERE MONTH(Fecha_Factura) BETWEEN 1 AND contador ) AS C1
		LEFT JOIN 
		    -- > Subquery 2
			(SELECT * 
			FROM cartera.cobros
			WHERE MONTH(Fecha_cobro) BETWEEN 1 AND contador ) AS C2
            -- > Union de Subqueries 
			ON C1.Credit_id = C2.Credit_id
            
            -- > Simula condicion de EXECPT
		WHERE C2.Monto_cobrado IS NULL 
		ORDER BY mes_id
		)
        -- > Consulta apartir del CTE
		SELECT mes_id , mes , Vencimiento , 
			SUM(Monto_credito)   AS Monto_Credito	,
		    AVG(Cartera_del_Mes) AS Cartera_del_Mes ,
            AVG(Cartera_Total)   AS Cartera_Total 	,
			ROUND( SUM(Monto_credito)  / AVG(Cartera_Total) , 3 ) AS Porcentage_cartera ,
			ROUND(AVG(conteo),0) AS N_Creditos
		FROM Explorar_3
		GROUP BY mes_id , mes , Vencimiento 
        ORDER BY mes_id , Monto_Credito DESC  ;
        
		-- > | Final de Consulta Principal |
        
        -- > Actualizacion de Fecha de Corte
		SET @Fecha_corte = DATE_ADD(DATE("2021-01-31"), INTERVAL contador MONTH) ; 
		SET contador = contador + 1 ;
        
    END WHILE ;
    -- > * Fin del Bucle *
END //
DELIMITER ;

# ----------------------- > \ Respuestas 11 al 13 / 
# Invocar Procedure
CALL cartera.Reportes_Corte() ;
			</pre>
			<iframe src="proyects/PYCR_01/Figures/Consulta_4_SQL.html" scrolling="no" width= "930" height= "680" style="float: center;position: relative; left: 110px;top: 10px"></iframe>
		</div>
		<!-- CONSULTA SQL 4 Fin-->

		
	  </div>
	  <!-- Analisis Cartera Pendiente Fin -->	
	  
	  
	  
	 
    </section>
    <!-- ======= Detalles contenido Inicio  ======= -->	

  </main><!-- End #main (no borrar esto) -->




  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>iPortfolio</span></strong>
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/ -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>
  </footer><!-- End  Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/typed.js/typed.umd.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>